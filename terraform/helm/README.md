## VLLM Prodiction-stack helm chart configuration
 üìçThis document describes the configurable values available for the `LMCache` production-stack Helm chart.
| Key                               | Description                                                                                                                               | Type     | Default                 |
| :-------------------------------- | :---------------------------------------------------------------------------------------------------------------------------------------- | :------- | :---------------------- |
| `servingEngineSpec.enableEngine`  | Whether to enable the serving engine deployment.                                                                                          | boolean  | `true`                  |
| `servingEngineSpec.labels`        | Customized labels for the serving engine deployment.                                                                                       | map      | `{environment: "test", release: "test"}` |
| `servingEngineSpec.vllmApiKey`    | (Optional) API key for securing the vLLM models. Can be a direct string or an object referencing an existing secret.                       | string/map | `null`                  |
| `servingEngineSpec.modelSpec`     | Array of specifications for configuring multiple serving engine deployments running different models.                                     | list     | `[]`                    |
| `servingEngineSpec.containerPort` | Port the vLLM server container is listening on.                                                                                          | integer  | `8000`                  |
| `servingEngineSpec.servicePort`   | Port the service will listen on.                                                                                                          | integer  | `80`                    |
| `servingEngineSpec.configs`       | Set other environment variables from a config map.                                                                                        | map      | `{}`                    |
| `servingEngineSpec.strategy`      | Deployment strategy for the serving engine pods.                                                                                         | map      | `{}`                    |
| `servingEngineSpec.startupProbe`  | Configuration for the startup probe of the serving engine container.                                                                     | map      | `{initialDelaySeconds: 15, periodSeconds: 10, failureThreshold: 60, httpGet: {path: /health, port: 8000}}` |
| `servingEngineSpec.livenessProbe` | Configuration for the liveness probe of the serving engine container.                                                                      | map      | `{initialDelaySeconds: 15, periodSeconds: 10, failureThreshold: 3, httpGet: {path: /health, port: 8000}}` |
| `servingEngineSpec.maxUnavailablePodDisruptionBudget` | Configuration for the PodDisruptionBudget for the serving engine pods.                                                              | string   | `""`                    |
| `servingEngineSpec.tolerations`   | Tolerations configuration for the serving engine pods (when there are taints on nodes).                                                      | list     | `[]`                    |
| `servingEngineSpec.runtimeClassName` | RuntimeClassName configuration for the serving engine pods (set to "nvidia" if using GPU).                                                   | string   | `"nvidia"`              |
| `servingEngineSpec.schedulerName` | SchedulerName configuration for the serving engine pods.                                                                                 | string   | `""`                    |
| `servingEngineSpec.shmSize`       | Size of the shared memory for the serving engine container.                                                                                | string   | `"20Gi"`                |
| `servingEngineSpec.securityContext` | Pod-level security context configuration for the serving engine pods.                                                                      | map      | `{}`                    |
| `servingEngineSpec.containerSecurityContext` | Container-level security context configuration for the serving engine container.                                                      | map      | `{runAsNonRoot: false}` |
| `routerSpec.repository`           | Docker image repository for the router.                                                                                                   | string   | `"lmcache/lmstack-router"` |
| `routerSpec.tag`                  | Docker image tag for the router.                                                                                                          | string   | `"latest"`              |
| `routerSpec.imagePullPolicy`      | Image pull policy for the router.                                                                                                         | string   | `"Always"`              |
| `routerSpec.enableRouter`         | Whether to enable the router service.                                                                                                    | boolean  | `true`                  |
| `routerSpec.replicaCount`         | Number of replicas for the router pod.                                                                                                   | integer  | `1`                     |
| `routerSpec.containerPort`        | Port the router container is listening on.                                                                                                | integer  | `8000`                  |
| `routerSpec.serviceType`          | Kubernetes service type for the router.                                                                                                   | string   | `"ClusterIP"`           |
| `routerSpec.servicePort`          | Port the router service will listen on.                                                                                                   | integer  | `80`                    |
| `routerSpec.serviceDiscovery`     | Service discovery mode for the router ("k8s" or "static").                                                                                 | string   | `"k8s"`                 |
| `routerSpec.staticBackends`       | Comma-separated list of backend addresses if serviceDiscovery is "static".                                                                | string   | `""`                    |
| `routerSpec.staticModels`         | Comma-separated list of model names if serviceDiscovery is "static".                                                                      | string   | `""`                    |
| `routerSpec.routingLogic`         | Routing logic for the router ("roundrobin" or "session").                                                                                | string   | `"roundrobin"`          |
| `routerSpec.sessionKey`           | Session key if using "session" routing logic.                                                                                             | string   | `""`                    |
| `routerSpec.extraArgs`            | Extra command line arguments to pass to the router.                                                                                     | list     | `[]`                    |
| `routerSpec.engineScrapeInterval` | Interval in seconds to scrape metrics from the serving engine.                                                                            | integer  | `15`                    |
| `routerSpec.requestStatsWindow`   | Window size in seconds for calculating request statistics.                                                                              | integer  | `60`                    |
| `routerSpec.strategy`             | Deployment strategy for the router pods.                                                                                                 | map      | `{}`                    |
| `routerSpec.vllmApiKey`           | (Optional) API key for securing the vLLM models. Can be a direct string or an object referencing an existing secret.                       | string/map | `null`                  |
| `routerSpec.resources`            | Resource requests and limits for the router container.                                                                                   | map      | `{requests: {cpu: "4", memory: "16G"}, limits: {cpu: "8", memory: "32G"}}` |
| `routerSpec.labels`               | Customized labels for the router deployment.                                                                                            | map      | `{environment: "router", release: "router"}` |
| `routerSpec.ingress.enabled`      | Enable Ingress controller resource for the router.                                                                                       | boolean  | `false`                 |
| `routerSpec.ingress.className`    | IngressClass to use for the router Ingress resource.                                                                                     | string   | `""`                    |
| `routerSpec.ingress.annotations`  | Additional annotations for the router Ingress resource.                                                                                 | map      | `{}`                    |
| `routerSpec.ingress.hosts`        | List of hostnames covered by the router Ingress record.                                                                                 | list     | `[{host: "vllm-router.local", paths: [{path: /, pathType: Prefix}]}]` |
| `routerSpec.ingress.tls`          | TLS configuration for hostnames covered by the router Ingress record.                                                                    | list     | `[]`                    |
| `routerSpec.nodeSelectorTerms`    | Node selector terms to match the nodes for the router pods.                                                                              | list     | `[]`                    |
| `readme`                          | A brief description of the Helm chart.                                                                                                    | string   | `Helm chart for vLLM` |
